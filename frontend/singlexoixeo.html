<!DOCTYPE HTML>
<html>
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Shop &mdash; Free Website Template, Free HTML5 Template by gettemplates.co</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free HTML5 Website Template by gettemplates.co" />
	<meta name="keywords" content="free website templates, free html5, free template, free bootstrap, free website template, html5, css3, mobile first, responsive" />
	<meta name="author" content="gettemplates.co" />

	<meta property="og:title" content=""/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<meta property="og:site_name" content=""/>
	<meta property="og:description" content=""/>
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<link rel="stylesheet" href="css/animate.css">
	<link rel="stylesheet" href="css/icomoon.css">
	<link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="css/flexslider.css">
	<link rel="stylesheet" href="css/owl.carousel.min.css">
	<link rel="stylesheet" href="css/owl.theme.default.min.css">
	<link rel="stylesheet" href="css/style.css">
	<link  href="css/chuong.css" rel="stylesheet">

	<script src="js/modernizr-2.6.2.min.js"></script>

	</head>
	<body>
		
	<div class="fh5co-loader"></div>
	
	<div id="page">
	<nav class="fh5co-nav" role="navigation">
		<div class="container">
			<div class="row">
				<div class="col-md-3 col-xs-2">
					<div id="fh5co-logo"><a href="index.html">Home</a></div>
				</div>
				<div class="col-md-6 col-xs-6 text-center menu-1">
					<ul>
						<li class="has-dropdown">
							<a href="product.html">Category</a>
						</li>
					</ul>
				</div>
				<div class="col-md-3 col-xs-4 text-right hidden-xs menu-2">
					<ul>
						<li>
							<a href="snaphot.html">
								<button id="camera-btn" class="btn btn-primary">
									<i class="icon-camera"></i> 
								</button>
							</a>
						</li>
					</ul>
				</div>
			</div>
			
		</div>
	</nav>

	<header id="fh5co-header" class="fh5co-cover fh5co-cover-sm" role="banner" style="background-image:url(img/cate/xoixeo/xoi2.jpeg);">
		<div class="overlay"></div>
		<div class="container">
			<div class="row">
				<div class="col-md-8 col-md-offset-2 text-center">
					<div class="display-t">
						<div class="display-tc animate-box" data-animate-effect="fadeIn">
							<h1>Food Details</h1>
						</div>
					</div>
				</div>
			</div>
		</div>
	</header>
	
	<div id="fh5co-product">
		<div class="container">

			<div class="row">
				<div class="col-md-10 col-md-offset-1 animate-box">
					<div class="owl-carousel owl-carousel-fullwidth product-carousel">
						<div class="item"><div class="active text-center"><figure><img src="img/cate/xoixeo/xoi1.jpg" alt="user"></figure></div></div>
						<div class="item"><div class="active text-center"><figure><img src="img/cate/xoixeo/xoi2.jpeg" alt="user"></figure></div></div>
						<div class="item"><div class="active text-center"><figure><img src="img/cate/xoixeo/xoi3.jpeg" alt="user"></figure></div></div>
						<div class="item"><div class="active text-center"><figure><img src="img/cate/xoixeo/xoi4.jpg" alt="user"></figure></div></div>
						<div class="item"><div class="active text-center"><figure><img src="img/cate/xoixeo/xoi5.jpg" alt="user"></figure></div></div>
					</div>

					<div class="row animate-box">
						<div class="col-md-8 col-md-offset-2 text-center fh5co-heading">
							<h2>Xôi Xéo</h2>
						</div>
					</div>
				</div>
			</div>

			<!-- ====== TABS (5 TAB + CSS/JS) ====== -->
			<div class="row">
				<div class="col-md-10 col-md-offset-1">

					<div class="fh5co-tabs animate-box" id="foodTabsRoot" data-food-key="xoixeo">

						<ul class="fh5co-tab-nav">
							<li class="active"><a href="#" data-tab="1"><span class="icon visible-xs"><i class="icon-file"></i></span><span class="hidden-xs">Chi tiết</span></a></li>
							<li><a href="#" data-tab="2"><span class="icon visible-xs"><i class="icon-file"></i></span><span class="hidden-xs">Dinh dưỡng</span></a></li>
							<li><a href="#" data-tab="3"><span class="icon visible-xs"><i class="icon-file"></i></span><span class="hidden-xs">Gợi ý & Cảnh báo</span></a></li>
							<li><a href="#" data-tab="4"><span class="icon visible-xs"><i class="icon-file"></i></span><span class="hidden-xs">Văn hoá</span></a></li>
							<li><a href="#" data-tab="5"><span class="icon visible-xs"><i class="icon-file"></i></span><span class="hidden-xs">Lịch sử</span></a></li>
						</ul>

						<div class="fh5co-tab-content-wrap">

							<!-- TAB 1 -->
						<!-- TAB 1: CHI TIẾT -->
<div class="fh5co-tab-content tab-content active" data-tab-content="1">
  <div class="row">
    <div class="col-md-10 col-md-offset-1">

      <h2>Xôi Xéo — Bùi đậu xanh, béo mỡ hành, thơm hành phi</h2>
      <p class="soft-muted">
        Xôi xéo là món ăn sáng bình dân nhưng “đỉnh” nhờ nếp dẻo thơm, đậu xanh bùi mịn và hành phi giòn.
        Món này ngon nhất khi còn nóng, trộn nhẹ tay để giữ kết cấu và mùi thơm.
      </p>

      <!-- Quick facts -->
      <div class="soft-card">
        <h4 class="section-title" style="margin-top:0">Tóm tắt nhanh</h4>
        <div class="row">
          <div class="col-sm-3">
            <div class="mini soft-muted">Loại món</div>
            <div><b>Xôi / ăn sáng</b></div>
          </div>
          <div class="col-sm-3">
            <div class="mini soft-muted">Hương vị</div>
            <div><b>Dẻo – bùi – béo – thơm</b></div>
          </div>
          <div class="col-sm-3">
            <div class="mini soft-muted">Ăn kèm</div>
            <div><b>Ruốc, chả, dưa leo</b></div>
          </div>
          <div class="col-sm-3">
            <div class="mini soft-muted">Giá tham khảo</div>
            <div><b>10k – 25k/phần</b></div>
          </div>
        </div>
      </div>

      <!-- Ingredients -->
      <div class="soft-card">
        <h4 class="section-title" style="margin-top:0">Thành phần</h4>

        <div class="row">
          <div class="col-sm-6">
            <h5 style="font-weight:700;margin-top:0">Phần xôi</h5>
            <ul class="mini soft-muted">
              <li>Gạo nếp (thơm, dẻo), ngâm rồi đồ/hấp chín.</li>
              <li>Đậu xanh hấp chín, giã/ xay mịn, ép rồi thái lát phủ lên xôi.</li>
            </ul>
            <div>
              <span class="food-chip">gạo nếp</span>
              <span class="food-chip">đậu xanh</span>
              <span class="food-chip">hấp</span>
            </div>
          </div>

          <div class="col-sm-6">
            <h5 style="font-weight:700;margin-top:0">Mỡ hành & topping</h5>
            <ul class="mini soft-muted">
              <li>Mỡ hành tạo độ béo và thơm, giúp xôi “mượt” hơn.</li>
              <li>Hành phi giòn là điểm nhấn; thêm ruốc/chả (tùy chọn).</li>
            </ul>
            <div>
              <span class="food-chip">mỡ hành</span>
              <span class="food-chip">hành phi</span>
              <span class="food-chip">ruốc/chả</span>
            </div>
          </div>
        </div>
      </div>

      <!-- How to eat -->
      <div class="soft-card">
        <h4 class="section-title" style="margin-top:0">Cách ăn ngon (đúng kiểu)</h4>
        <div class="row">
          <div class="col-sm-6">
            <h5 style="font-weight:700;margin-top:0">1) Trộn nhẹ tay</h5>
            <p class="mini soft-muted">
              Trộn vừa đủ để đậu và mỡ hành phủ đều, tránh bóp mạnh làm xôi nát và bết.
            </p>
          </div>
          <div class="col-sm-6">
            <h5 style="font-weight:700;margin-top:0">2) Ăn nóng + thêm đồ mặn</h5>
            <p class="mini soft-muted">
              Thêm chút ruốc/chả giúp cân vị, bớt cảm giác “no dầu” và ăn đỡ ngán.
            </p>
          </div>
        </div>

        <div class="divider"></div>

        <h5 style="font-weight:700;margin-top:0">Mẹo chọn quán ngon</h5>
        <ul class="mini soft-muted">
          <li>Xôi dẻo thơm, hạt nếp không sượng.</li>
          <li>Đậu xanh bùi, mịn, không khô bột.</li>
          <li>Hành phi giòn, không khét, không ỉu dầu.</li>
        </ul>
      </div>

      <!-- Variations -->
      <div class="soft-card">
        <h4 class="section-title" style="margin-top:0">Biến thể phổ biến</h4>
        <div class="row">
          <div class="col-sm-4">
            <span class="badge-soft">Hà Nội</span>
            <p class="mini soft-muted" style="margin-top:8px">
              Fokus đậu xanh + hành phi, vị mặn nhẹ từ ruốc.
            </p>
          </div>
          <div class="col-sm-4">
            <span class="badge-soft">Miền Nam</span>
            <p class="mini soft-muted" style="margin-top:8px">
              Có thể thêm dừa nạo, vị béo bùi và dễ ngọt nhẹ.
            </p>
          </div>
          <div class="col-sm-4">
            <span class="badge-soft">Tuỳ quán</span>
            <p class="mini soft-muted" style="margin-top:8px">
              Thêm pate, trứng, chà bông… thành “xôi full topping”.
            </p>
          </div>
        </div>
      </div>

      <!-- CTA -->
      <div class="soft-card">
        <h4 class="section-title" style="margin-top:0">Đi tiếp ở các tab bên cạnh</h4>
        <ul class="mini soft-muted">
          <li><b>Dinh dưỡng:</b> xem calo + carb/protein/fat + % nhu cầu/ngày.</li>
          <li><b>Gợi ý & Cảnh báo:</b> chọn bệnh lý/mục tiêu để nhận khuyến nghị.</li>
          <li><b>Văn hoá:</b> câu chuyện vùng miền.</li>
          <li><b>Lịch sử:</b> lưu món đã nhận dạng và tổng hợp theo ngày/tuần.</li>
        </ul>
      </div>

    </div>
  </div>
</div>


							<!-- TAB 2: DINH DƯỠNG -->
							<div class="fh5co-tab-content tab-content" data-tab-content="2">
								<div class="row">
									<div class="col-md-10 col-md-offset-1">
										<h2>Tính toán calo & dinh dưỡng</h2>
										<p class="soft-muted">Ước lượng theo 1 suất xôi xéo (không tính topping, bạn bật topping bên dưới).</p>

										<div class="soft-card form-compact">
											<h4 class="section-title" style="margin-top:0">Hồ sơ & mục tiêu</h4>

											<div class="row">
												<div class="col-sm-3">
													<label class="mini">Giới tính</label>
													<select id="sex" class="form-control">
														<option value="male" selected>Nam</option>
														<option value="female">Nữ</option>
													</select>
												</div>
												<div class="col-sm-3">
													<label class="mini">Tuổi</label>
													<input id="age" type="number" class="form-control" value="22" min="12" max="80">
												</div>
												<div class="col-sm-3">
													<label class="mini">Cân nặng (kg)</label>
													<input id="weight" type="number" class="form-control" value="60" min="30" max="200">
												</div>
												<div class="col-sm-3">
													<label class="mini">Chiều cao (cm)</label>
													<input id="height" type="number" class="form-control" value="170" min="120" max="220">
												</div>
											</div>

											<div class="row" style="margin-top:10px">
												<div class="col-sm-4">
													<label class="mini">Mức vận động</label>
													<select id="activity" class="form-control">
														<option value="1.2">Ít vận động</option>
														<option value="1.375">Nhẹ</option>
														<option value="1.55" selected>Vừa</option>
														<option value="1.725">Nhiều</option>
														<option value="1.9">Rất nhiều</option>
													</select>
												</div>
												<div class="col-sm-4">
													<label class="mini">Mục tiêu</label>
													<select id="goal" class="form-control">
														<option value="maintain" selected>Duy trì</option>
														<option value="lose">Giảm cân</option>
														<option value="gain">Tăng cơ</option>
														<option value="lowcarb">Low-carb</option>
														<option value="eatclean">Eat clean</option>
													</select>
												</div>
												<div class="col-sm-4">
													<label class="mini">Khẩu phần (so với 1 suất chuẩn)</label>
													<input id="portion" type="range" min="0.5" max="2.0" step="0.1" value="1.0" style="width:100%">
													<div class="soft-muted mini">Đang chọn: <b id="portionLabel">1.0</b>x</div>
												</div>
											</div>

											<div class="divider"></div>

											<h4 class="section-title" style="margin-top:0">Topping (tùy chọn)</h4>
											<div class="opt-grid">
												<div class="opt">
													<label class="mini" style="display:block;margin-bottom:6px">
														<input type="checkbox" id="includeRuoc"> Thêm ruốc
													</label>
													<div class="row">
														<div class="col-xs-6"><span class="mini soft-muted">Số phần</span></div>
														<div class="col-xs-6"><input id="ruocCount" type="number" class="form-control" value="1" min="0" max="5"></div>
													</div>
													<div class="mini soft-muted" style="margin-top:6px">Ruốc làm natri tăng mạnh.</div>
												</div>

												<div class="opt">
													<label class="mini" style="display:block;margin-bottom:6px">
														<input type="checkbox" id="includeCha"> Thêm chả
													</label>
													<div class="row">
														<div class="col-xs-6"><span class="mini soft-muted">Số miếng</span></div>
														<div class="col-xs-6"><input id="chaCount" type="number" class="form-control" value="1" min="0" max="8"></div>
													</div>
													<div class="mini soft-muted" style="margin-top:6px">Chả tăng protein, cũng tăng natri.</div>
												</div>

												<div class="opt">
													<label class="mini" style="display:block;margin-bottom:6px">
														<input type="checkbox" id="includeEgg"> Thêm trứng
													</label>
													<div class="row">
														<div class="col-xs-6"><span class="mini soft-muted">Số quả</span></div>
														<div class="col-xs-6"><input id="eggCount" type="number" class="form-control" value="1" min="0" max="4"></div>
													</div>
													<div class="mini soft-muted" style="margin-top:6px">Trứng tăng protein, fat vừa.</div>
												</div>
											</div>

											<div class="divider"></div>

											<div class="mini soft-muted" id="toppingNote"></div>
										</div>

										<div class="soft-card">
											<div class="row">
												<div class="col-sm-8">
													<h4 class="section-title" style="margin-top:0">Kết quả theo khẩu phần</h4>

													<div class="kpi-row">
														<div class="kpi-box"><div class="kpi"><span id="calories">0</span> <small>kcal</small></div><span class="label">Năng lượng</span></div>
														<div class="kpi-box"><div class="kpi"><span id="carbs">0</span><small> g</small></div><span class="label">Carbohydrate</span></div>
														<div class="kpi-box"><div class="kpi"><span id="protein">0</span><small> g</small></div><span class="label">Protein</span></div>
														<div class="kpi-box"><div class="kpi"><span id="fat">0</span><small> g</small></div><span class="label">Chất béo</span></div>
													</div>

													<div class="divider"></div>

													<div class="row">
														<div class="col-sm-6">
															<div class="mini soft-muted">Chất xơ: <b id="fiber">0</b> g</div>
															<div class="mini soft-muted">Đường: <b id="sugar">0</b> g</div>
														</div>
														<div class="col-sm-6">
															<div class="mini soft-muted">Natri: <b id="sodium">0</b> mg</div>
															<div class="mini soft-muted">Béo bão hoà: <b id="satfat">0</b> g</div>
														</div>
													</div>

													<div class="divider"></div>

													<h4 class="section-title" style="margin-top:0">So với nhu cầu/ngày (ước tính)</h4>
													<div class="mini">Nhu cầu năng lượng/ngày (TDEE): <b id="tdee">0</b> kcal</div>
													<div class="progress"><div id="pCal" class="progress-bar" style="width:0%"></div></div>
													<div class="mini soft-muted">Món này chiếm <b id="pCalTxt">0%</b> năng lượng/ngày</div>

													<div class="divider"></div>

													<div class="mini">Carb mục tiêu/ngày: <b id="carbTarget">0</b> g</div>
													<div class="progress"><div id="pCarb" class="progress-bar" style="width:0%"></div></div>

													<div class="mini" style="margin-top:10px">Protein mục tiêu/ngày: <b id="proteinTarget">0</b> g</div>
													<div class="progress"><div id="pProtein" class="progress-bar" style="width:0%"></div></div>

													<div class="mini" style="margin-top:10px">Chất béo mục tiêu/ngày: <b id="fatTarget">0</b> g</div>
													<div class="progress"><div id="pFat" class="progress-bar" style="width:0%"></div></div>
												</div>

												<div class="col-sm-4">
													<h4 class="section-title" style="margin-top:0">Vitamin & khoáng chất</h4>
													<div class="soft-muted mini" id="micros"></div>

													<div class="divider"></div>
													<h4 class="section-title" style="margin-top:0">Ghi chú</h4>
													<div class="mini soft-muted" id="nutritionNote"></div>
												</div>
											</div>
										</div>

									</div>
								</div>
							</div>

							<!-- TAB 3: GỢI Ý & CẢNH BÁO -->
							<div class="fh5co-tab-content tab-content" data-tab-content="3">
								<div class="row">
									<div class="col-md-10 col-md-offset-1">
										<h2>Gợi ý ăn uống & cảnh báo sức khoẻ</h2>

										<div class="soft-card form-compact">
											<h4 class="section-title" style="margin-top:0">Tùy chỉnh</h4>

											<div class="row">
												<div class="col-sm-4">
													<label class="mini">Mục tiêu</label>
													<select id="goal2" class="form-control">
														<option value="maintain" selected>Duy trì</option>
														<option value="lose">Giảm cân</option>
														<option value="gain">Tăng cơ</option>
														<option value="lowcarb">Low-carb</option>
														<option value="eatclean">Eat clean</option>
													</select>
												</div>
												<div class="col-sm-4">
													<label class="mini">Khẩu phần gợi ý</label>
													<select id="portionAdvice" class="form-control">
														<option value="0.5">0.5 suất</option>
														<option value="0.7" selected>0.7 suất</option>
														<option value="1.0">1.0 suất</option>
														<option value="1.2">1.2 suất</option>
														<option value="1.5">1.5 suất</option>
													</select>
												</div>
												<div class="col-sm-4">
													<label class="mini">Tần suất đề xuất</label>
													<select id="frequency" class="form-control">
														<option value="rare" selected>Thỉnh thoảng</option>
														<option value="weekly">1–2 lần/tuần</option>
														<option value="often">Hay ăn</option>
													</select>
												</div>
											</div>

											<div class="divider"></div>

											<label class="mini" style="margin-bottom:6px">Bệnh lý / nguy cơ (chọn nếu có)</label><br>
											<label class="pill"><input type="checkbox" class="cond2" value="diabetes"> Đái tháo đường</label>
											<label class="pill"><input type="checkbox" class="cond2" value="hypertension"> Tăng huyết áp</label>
											<label class="pill"><input type="checkbox" class="cond2" value="dyslipidemia"> Rối loạn mỡ máu</label>
											<label class="pill"><input type="checkbox" class="cond2" value="obesity"> Thừa cân / béo phì</label>
											<label class="pill"><input type="checkbox" class="cond2" value="kidney"> Bệnh thận (kiểm soát muối)</label>
											<label class="pill"><input type="checkbox" class="cond2" value="gout"> Gout</label>
											<label class="pill"><input type="checkbox" class="cond2" value="stomach"> Dạ dày/GERD</label>
										</div>

										<div class="soft-card">
											<h4 class="section-title" style="margin-top:0">Gợi ý khẩu phần</h4>
											<ul class="mini soft-muted" id="portionTips"></ul>

											<div class="divider"></div>

											<h4 class="section-title" style="margin-top:0">Mẹo ăn “ổn” hơn</h4>
											<ul class="mini soft-muted" id="smartEatTips"></ul>
										</div>

										<div class="soft-card">
											<h4 class="section-title" style="margin-top:0">Cảnh báo</h4>
											<ul class="warn-list mini" id="warningList"></ul>
											<p class="mini soft-muted" style="margin-top:10px">* Gợi ý phổ thông, không thay thế tư vấn y tế.</p>
										</div>
									</div>
								</div>
							</div>

							<!-- TAB 4: VĂN HOÁ -->
							<div class="fh5co-tab-content tab-content" data-tab-content="4">
								<div class="row">
									<div class="col-md-10 col-md-offset-1">
										<h2>Văn hoá & vùng miền</h2>
										<p class="soft-muted">Xôi xéo là “ăn sáng quốc dân” kiểu Hà Nội: dẻo, bùi, béo nhưng dễ ngấy nếu ăn nhiều.</p>

										<div class="soft-card">
											<h4 class="section-title" style="margin-top:0">Điểm khác nhau theo vùng</h4>
											<ul class="mini soft-muted">
												<li>Miền Bắc: thiên mặn (ruốc, hành phi), ít ngọt.</li>
												<li>Miền Trung: có thể thêm cay nhẹ, ăn kèm kiểu riêng.</li>
												<li>Miền Nam: dễ gặp phiên bản ngọt hơn, đôi khi thêm dừa.</li>
											</ul>
										</div>

										<div class="soft-card">
											<h4 class="section-title" style="margin-top:0">Tip trải nghiệm</h4>
											<div class="mini soft-muted">
												<div>• Đừng rưới quá nhiều mỡ hành nếu bạn dễ ngấy.</div>
												<div>• Nếu muốn “fit”: giảm khẩu phần + thêm trứng/chả nạc + hạn chế ruốc.</div>
												<div>• Uống nước lọc/ trà nóng, tránh nước ngọt kèm.</div>
											</div>
										</div>
									</div>
								</div>
							</div>

							<!-- TAB 5: LỊCH SỬ -->
							<div class="fh5co-tab-content tab-content" data-tab-content="5">
								<div class="row">
									<div class="col-md-10 col-md-offset-1">
										<h2>Lịch sử món đã lưu</h2>
										<p class="soft-muted">Lưu localStorage, tự tính tổng hôm nay/7 ngày.</p>

										<div class="soft-card">
											<h4 class="section-title" style="margin-top:0">Tổng dinh dưỡng</h4>
											<div class="row">
												<div class="col-sm-6">
													<div class="mini soft-muted">Hôm nay</div>
													<div class="kpi"><span id="todayKcal">0</span> <small>kcal</small></div>
													<div class="mini soft-muted">Carb: <b id="todayCarb">0</b> g · Protein: <b id="todayProtein">0</b> g · Fat: <b id="todayFat">0</b> g</div>
												</div>
												<div class="col-sm-6">
													<div class="mini soft-muted">7 ngày gần nhất</div>
													<div class="kpi"><span id="weekKcal">0</span> <small>kcal</small></div>
													<div class="mini soft-muted">Carb: <b id="weekCarb">0</b> g · Protein: <b id="weekProtein">0</b> g · Fat: <b id="weekFat">0</b> g</div>
												</div>
											</div>

											<div class="divider"></div>

											<div class="row form-compact">
												<div class="col-sm-4">
													<label class="mini">Xem theo</label>
													<select id="historyRange" class="form-control">
														<option value="today">Hôm nay</option>
														<option value="7" selected>7 ngày</option>
														<option value="30">30 ngày</option>
														<option value="all">Tất cả</option>
													</select>
												</div>
												<div class="col-sm-4">
													<label class="mini">Sắp xếp</label>
													<select id="historySort" class="form-control">
														<option value="new" selected>Mới nhất</option>
														<option value="old">Cũ nhất</option>
														<option value="kcal_desc">Calo giảm dần</option>
														<option value="kcal_asc">Calo tăng dần</option>
													</select>
												</div>
												<div class="col-sm-4">
													<label class="mini">Tìm kiếm</label>
													<input id="historySearch" class="form-control" placeholder="Ví dụ: xôi...">
												</div>
											</div>
										</div>

										<div class="soft-card">
											<div class="row">
												<div class="col-sm-8">
													<h4 class="section-title" style="margin-top:0">Danh sách</h4>
													<div id="historyList"><p class="mini soft-muted">Chưa có dữ liệu.</p></div>
												</div>
												<div class="col-sm-4">
													<h4 class="section-title" style="margin-top:0">Thao tác</h4>
													<button id="saveHistory" class="btn btn-primary btn-block">Lưu món hiện tại</button>
													<div class="divider"></div>
													<button id="exportHistory" class="btn btn-default btn-block">Xuất JSON</button>
													<button id="clearHistory" class="btn btn-default btn-block">Xoá lịch sử</button>
												</div>
											</div>
										</div>

									</div>
								</div>
							</div>

						</div>
					</div>

				</div>
			</div>
			<!-- ====== /TABS ====== -->

		</div>
	</div>

	<footer id="fh5co-footer" role="contentinfo">
		<div class="container">
			<div class="row row-pb-md">
				<div class="col-md-4 fh5co-widget">
					<h3>Shop.</h3>
					<p>Facilis ipsum reprehenderit nemo molestias. Aut cum mollitia reprehenderit. Eos cumque dicta adipisci architecto culpa amet.</p>
				</div>
				<div class="col-md-2 col-sm-4 col-xs-6 col-md-push-1">
					<ul class="fh5co-footer-links">
						<li><a href="#">About</a></li>
						<li><a href="#">Help</a></li>
						<li><a href="#">Contact</a></li>
						<li><a href="#">Terms</a></li>
						<li><a href="#">Meetups</a></li>
					</ul>
				</div>
				<div class="col-md-2 col-sm-4 col-xs-6 col-md-push-1">
					<ul class="fh5co-footer-links">
						<li><a href="#">Shop</a></li>
						<li><a href="#">Privacy</a></li>
						<li><a href="#">Testimonials</a></li>
						<li><a href="#">Handbook</a></li>
						<li><a href="#">Held Desk</a></li>
					</ul>
				</div>
				<div class="col-md-2 col-sm-4 col-xs-6 col-md-push-1">
					<ul class="fh5co-footer-links">
						<li><a href="#">Find Designers</a></li>
						<li><a href="#">Find Developers</a></li>
						<li><a href="#">Teams</a></li>
						<li><a href="#">Advertise</a></li>
						<li><a href="#">API</a></li>
					</ul>
				</div>
			</div>

			<div class="row copyright">
				<div class="col-md-12 text-center">
					<p>
						<ul class="fh5co-social-icons">
							<li><a href="#"><i class="icon-twitter"></i></a></li>
							<li><a href="#"><i class="icon-facebook"></i></a></li>
							<li><a href="#"><i class="icon-linkedin"></i></a></li>
							<li><a href="#"><i class="icon-dribbble"></i></a></li>
						</ul>
					</p>
				</div>
			</div>

		</div>
	</footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
	</div>
	
	<!-- jQuery -->
	<script src="js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="js/jquery.waypoints.min.js"></script>
	<!-- Carousel -->
	<script src="js/owl.carousel.min.js"></script>
	<!-- countTo -->
	<script src="js/jquery.countTo.js"></script>
	<!-- Flexslider -->
	<script src="js/jquery.flexslider-min.js"></script>
	<!-- Main -->
	<script src="js/main.js"></script>

	<!-- ====== PAGE JS (TAB + NUTRITION + ADVICE + HISTORY) ====== -->
	<script>
	(function () {
	  function qs(sel, root){ return (root || document).querySelector(sel); }
	  function qsa(sel, root){ return Array.prototype.slice.call((root || document).querySelectorAll(sel)); }
	  function clamp(n,a,b){ return Math.max(a, Math.min(b, n)); }
	  function round0(n){ return Math.round(n); }
	  function round1(n){ return Math.round(n*10)/10; }
	  function now(){ return new Date(); }
	  function toDate(ts){ return new Date(ts); }
	  function isSameDay(a,b){ return a.getFullYear()===b.getFullYear() && a.getMonth()===b.getMonth() && a.getDate()===b.getDate(); }
	  function withinDays(d, days){ return (now() - d) <= (days*24*60*60*1000); }

	  // ===== TOPPINGS (ước lượng / 1 đơn vị) =====
	  var TOPPINGS = {
	    ruoc:  { label:"Ruốc",   carbs:0,   protein:8, fat:2, fiber:0, sugar:0, sodium_mg:450, satfat:0.6 },
	    cha:   { label:"Chả",    carbs:1,   protein:7, fat:4, fiber:0, sugar:0, sodium_mg:300, satfat:1.3 },
	    egg:   { label:"Trứng",  carbs:0.5, protein:6, fat:5, fiber:0, sugar:0, sodium_mg:70,  satfat:1.6 }
	  };

	  // ===== Food DB (ước lượng) =====
	  var FOOD_DB = {
	    "xoixeo": {
	      key: "xoixeo",
	      name: "Xôi Xéo",
	      servingLabel: "1 suất xôi xéo (không topping)",
	      // ước lượng 1 suất: carb cao, fat vừa (mỡ hành/hành phi), protein vừa (đỗ xanh)
	      macros: { carbs: 78, protein: 11, fat: 14, fiber: 4.0, sugar: 3, sodium_mg: 450, satfat: 4.0 },
	      micros: [
	        { k: "Vitamin B", v: "khá (gạo nếp + đỗ xanh)" },
	        { k: "Mangan", v: "tốt (gạo)" },
	        { k: "Chất xơ", v: "vừa (đỗ xanh)" },
	        { k: "Natri", v: "tăng mạnh nếu thêm ruốc/chả" }
	      ],
	      note: "Calo thay đổi nhiều theo lượng mỡ hành/hành phi và topping."
	    }
	  };

	  function getFoodKey(){
	    var root = qs("#foodTabsRoot");
	    return root ? (root.getAttribute("data-food-key") || "xoixeo") : "xoixeo";
	  }
	  function getFood(){ return FOOD_DB[getFoodKey()] || FOOD_DB["xoixeo"]; }

	  function kcalFromMacros(m){ return (m.carbs*4) + (m.protein*4) + (m.fat*9); }

	  function calcBMR(sex, age, weight, height){
	    var base = 10*weight + 6.25*height - 5*age;
	    return (sex === "female") ? (base - 161) : (base + 5);
	  }

	  function goalCalAdjust(goal){
	    if(goal === "lose") return 0.85;
	    if(goal === "gain") return 1.12;
	    if(goal === "lowcarb") return 0.95;
	    return 1.0;
	  }

	  function macroRatio(goal){
	    if(goal === "lowcarb") return { c:0.25, p:0.30, f:0.45 };
	    if(goal === "gain")    return { c:0.45, p:0.25, f:0.30 };
	    if(goal === "lose")    return { c:0.40, p:0.30, f:0.30 };
	    if(goal === "eatclean")return { c:0.45, p:0.25, f:0.30 };
	    return { c:0.50, p:0.20, f:0.30 };
	  }

	  function calcTargets(tdee, goal){
	    var adj = tdee * goalCalAdjust(goal);
	    var r = macroRatio(goal);
	    return {
	      kcal: round0(adj),
	      carb_g: round0((adj * r.c) / 4),
	      protein_g: round0((adj * r.p) / 4),
	      fat_g: round0((adj * r.f) / 9)
	    };
	  }

	  function setBar(el, value, max){
	    var pct = (max<=0) ? 0 : clamp((value/max)*100, 0, 100);
	    if(el) el.style.width = pct.toFixed(1) + "%";
	    return pct;
	  }

	  function mergeMacros(a,b){
	    return {
	      carbs: a.carbs + b.carbs,
	      protein: a.protein + b.protein,
	      fat: a.fat + b.fat,
	      fiber: a.fiber + b.fiber,
	      sugar: a.sugar + b.sugar,
	      sodium_mg: a.sodium_mg + b.sodium_mg,
	      satfat: a.satfat + b.satfat
	    };
	  }

	  function getNutritionState(){
	    return {
	      sex: qs("#sex") ? qs("#sex").value : "male",
	      age: qs("#age") ? (+qs("#age").value || 22) : 22,
	      weight: qs("#weight") ? (+qs("#weight").value || 60) : 60,
	      height: qs("#height") ? (+qs("#height").value || 170) : 170,
	      activity: qs("#activity") ? (+qs("#activity").value || 1.55) : 1.55,
	      goal: qs("#goal") ? qs("#goal").value : "maintain",
	      portion: qs("#portion") ? (+qs("#portion").value || 1.0) : 1.0,

	      includeRuoc: qs("#includeRuoc") ? !!qs("#includeRuoc").checked : false,
	      ruocCount: qs("#ruocCount") ? (+qs("#ruocCount").value || 0) : 0,

	      includeCha: qs("#includeCha") ? !!qs("#includeCha").checked : false,
	      chaCount: qs("#chaCount") ? (+qs("#chaCount").value || 0) : 0,

	      includeEgg: qs("#includeEgg") ? !!qs("#includeEgg").checked : false,
	      eggCount: qs("#eggCount") ? (+qs("#eggCount").value || 0) : 0
	    };
	  }

	  function calcToppingMacros(s){
	    var sum = {carbs:0,protein:0,fat:0,fiber:0,sugar:0,sodium_mg:0,satfat:0};
	    var tags = [];

	    function add(key, count){
	      if(count<=0) return;
	      var t = TOPPINGS[key];
	      sum = mergeMacros(sum, {
	        carbs: t.carbs * count,
	        protein: t.protein * count,
	        fat: t.fat * count,
	        fiber: t.fiber * count,
	        sugar: t.sugar * count,
	        sodium_mg: t.sodium_mg * count,
	        satfat: t.satfat * count
	      });
	      tags.push(t.label + "x" + count);
	    }

	    if(s.includeRuoc) add("ruoc", Math.max(0, s.ruocCount||0));
	    if(s.includeCha)  add("cha",  Math.max(0, s.chaCount||0));
	    if(s.includeEgg)  add("egg",  Math.max(0, s.eggCount||0));

	    return { macros: sum, tags: tags };
	  }

	  function syncT2toT3(){
	    if(qs("#goal") && qs("#goal2")) qs("#goal2").value = qs("#goal").value;
	    if(qs("#portion") && qs("#portionAdvice")){
	      var pv = +qs("#portion").value || 1.0;
	      var opts = qsa("#portionAdvice option").map(function(o){ return +o.value; });
	      var best = opts[0], bestDiff = Math.abs(opts[0]-pv);
	      for(var i=1;i<opts.length;i++){
	        var d = Math.abs(opts[i]-pv);
	        if(d < bestDiff){ bestDiff = d; best = opts[i]; }
	      }
	      qs("#portionAdvice").value = String(best);
	    }
	  }

	  function syncT3toT2(){
	    if(qs("#goal2") && qs("#goal")) qs("#goal").value = qs("#goal2").value;
	    if(qs("#portionAdvice") && qs("#portion")) qs("#portion").value = (+qs("#portionAdvice").value || 1.0).toFixed(1);
	    if(qs("#portionLabel") && qs("#portion")) qs("#portionLabel").textContent = (+qs("#portion").value).toFixed(1);
	  }

	  function renderNutrition(){
	    var food = getFood();
	    var s = getNutritionState();
	    if(qs("#portionLabel")) qs("#portionLabel").textContent = s.portion.toFixed(1);

	    // base macros * portion
	    var m0 = food.macros;
	    var base = {
	      carbs: m0.carbs * s.portion,
	      protein: m0.protein * s.portion,
	      fat: m0.fat * s.portion,
	      fiber: m0.fiber * s.portion,
	      sugar: m0.sugar * s.portion,
	      sodium_mg: m0.sodium_mg * s.portion,
	      satfat: m0.satfat * s.portion
	    };

	    // toppings (không nhân theo portion)
	    var tp = calcToppingMacros(s);
	    var m = mergeMacros(base, tp.macros);

	    m = {
	      carbs: round1(m.carbs),
	      protein: round1(m.protein),
	      fat: round1(m.fat),
	      fiber: round1(m.fiber),
	      sugar: round1(m.sugar),
	      sodium_mg: round0(m.sodium_mg),
	      satfat: round1(m.satfat)
	    };

	    var kcal = round0(kcalFromMacros(m));

	    if(qs("#calories")) qs("#calories").textContent = kcal;
	    if(qs("#carbs")) qs("#carbs").textContent = m.carbs;
	    if(qs("#protein")) qs("#protein").textContent = m.protein;
	    if(qs("#fat")) qs("#fat").textContent = m.fat;

	    if(qs("#fiber")) qs("#fiber").textContent = m.fiber;
	    if(qs("#sugar")) qs("#sugar").textContent = m.sugar;
	    if(qs("#sodium")) qs("#sodium").textContent = m.sodium_mg;
	    if(qs("#satfat")) qs("#satfat").textContent = m.satfat;

	    var bmr = calcBMR(s.sex, s.age, s.weight, s.height);
	    var tdee = bmr * s.activity;
	    var targets = calcTargets(tdee, s.goal);

	    if(qs("#tdee")) qs("#tdee").textContent = targets.kcal;
	    if(qs("#carbTarget")) qs("#carbTarget").textContent = targets.carb_g;
	    if(qs("#proteinTarget")) qs("#proteinTarget").textContent = targets.protein_g;
	    if(qs("#fatTarget")) qs("#fatTarget").textContent = targets.fat_g;

	    var pCal = setBar(qs("#pCal"), kcal, targets.kcal);
	    if(qs("#pCalTxt")) qs("#pCalTxt").textContent = round0(pCal) + "%";
	    setBar(qs("#pCarb"), m.carbs, targets.carb_g);
	    setBar(qs("#pProtein"), m.protein, targets.protein_g);
	    setBar(qs("#pFat"), m.fat, targets.fat_g);

	    if(qs("#micros")){
	      qs("#micros").innerHTML = (food.micros||[]).map(function(x){
	        return '<div style="margin:6px 0">• <b>'+x.k+'</b>: '+x.v+'</div>';
	      }).join("");
	    }

	    var toppingTxt = tp.tags.length ? ("Đang tính topping: " + tp.tags.join(", ") + ".") : "Không tính topping.";
	    if(qs("#toppingNote")) qs("#toppingNote").textContent = toppingTxt;

	    if(qs("#nutritionNote")){
	      qs("#nutritionNote").textContent = toppingTxt + " " + (food.note || "");
	    }

	    syncT2toT3();
	    return { foodKey: food.key, name: food.name, kcal:kcal, macros:m, goal:s.goal, portion:s.portion, toppingTags: tp.tags };
	  }

	  function getHealthState(){
	    return {
	      goal: qs("#goal2") ? qs("#goal2").value : (qs("#goal") ? qs("#goal").value : "maintain"),
	      conditions: qsa(".cond2").filter(function(c){ return c.checked; }).map(function(c){ return c.value; }),
	      frequency: qs("#frequency") ? qs("#frequency").value : "rare"
	    };
	  }

	  function buildHealthTips(ctx, conds, freq){
	    var tips=[], smart=[], warns=[];
	    smart.push("Xôi xéo nhiều carb: kiểm soát khẩu phần nếu bạn đang giảm cân/tiểu đường.");
	    smart.push("Muốn no lâu: thêm trứng/chả nạc thay vì tăng xôi.");
	    smart.push("Muốn bớt ngấy: giảm mỡ hành/hành phi; ăn kèm dưa leo/rau.");
	    smart.push("Ruốc/chả làm natri cao: đừng lạm dụng nếu bạn nhạy muối.");

	    if(ctx.goal === "lose"){
	      tips.push("Giảm cân: 0.5–0.7 suất; ưu tiên thêm trứng/chả (ít) để đủ protein.");
	      if(ctx.kcal >= 550) warns.push("Calo cao → giảm khẩu phần hoặc bỏ bớt topping dầu/mặn.");
	    } else if(ctx.goal === "lowcarb"){
	      tips.push("Low-carb: xôi xéo là carb nặng. Nên ăn nửa suất, không tăng xôi.");
	      if(ctx.macros.carbs >= 60) warns.push("Carb rất cao (gạo nếp).");
	    } else if(ctx.goal === "gain"){
	      tips.push("Tăng cơ: 1 suất + thêm trứng/chả, tránh tăng quá nhiều mỡ hành.");
	    } else {
	      tips.push("Duy trì: 1 suất ổn, cân bằng bằng bữa sau ít tinh bột.");
	    }

	    if(freq === "often"){
	      warns.push("Ăn hay: dễ dư tinh bột → xen kẽ bữa sáng giàu protein/rau.");
	    }

	    if(conds.indexOf("diabetes")!==-1){
	      tips.push("Đái tháo đường: ưu tiên 0.5 suất; thêm trứng; hạn chế ruốc.");
	      warns.push("Theo dõi đường huyết vì carb cao và hấp thu nhanh.");
	    }
	    if(conds.indexOf("hypertension")!==-1 || conds.indexOf("kidney")!==-1){
	      tips.push("Huyết áp/Thận: hạn chế ruốc/chả; chọn vị nhạt.");
	      if(ctx.macros.sodium_mg >= 1000) warns.push("Natri cao → giảm ruốc/chả, chọn khẩu phần nhỏ.");
	    }
	    if(conds.indexOf("dyslipidemia")!==-1){
	      tips.push("Mỡ máu: giảm mỡ hành/hành phi; tránh thêm quá nhiều topping béo.");
	    }
	    if(conds.indexOf("obesity")!==-1){
	      tips.push("Thừa cân: 0.5–0.7 suất + thêm trứng (1) là đủ.");
	    }
	    if(conds.indexOf("gout")!==-1){
	      tips.push("Gout: ăn vừa phải; ưu tiên trứng hơn là thịt chế biến mặn.");
	    }
	    if(conds.indexOf("stomach")!==-1){
	      warns.push("Đồ nếp có thể khó tiêu với một số người → ăn ít, nhai kỹ.");
	    }

	    if(warns.length===0 && conds.length===0) warns.push("Không có cảnh báo lớn. Chủ yếu là carb cao và natri nếu thêm ruốc/chả.");

	    return {tips:tips, smart:smart, warns:warns};
	  }

	  function renderHealth(nutCtx){
	    var ctx = nutCtx || renderNutrition();
	    var hs = getHealthState();
	    var out = buildHealthTips(ctx, hs.conditions, hs.frequency);

	    if(qs("#portionTips")) qs("#portionTips").innerHTML = out.tips.map(function(t){return "<li>"+t+"</li>";}).join("");
	    if(qs("#smartEatTips")) qs("#smartEatTips").innerHTML = out.smart.map(function(t){return "<li>"+t+"</li>";}).join("");
	    if(qs("#warningList")) qs("#warningList").innerHTML = out.warns.map(function(w){return "<li>"+w+"</li>";}).join("");
	  }

	  function activateTab(tabId){
	    qsa(".fh5co-tab-nav li").forEach(function(li){ li.classList.remove("active"); });
	    var link = qs('.fh5co-tab-nav a[data-tab="'+tabId+'"]');
	    if(link && link.parentElement) link.parentElement.classList.add("active");

	    qsa(".fh5co-tab-content[data-tab-content]").forEach(function(c){
	      c.classList.remove("active");
	      if(c.getAttribute("data-tab-content")===String(tabId)) c.classList.add("active");
	    });

	    if(String(tabId)==="2"){ var c2 = renderNutrition(); renderHealth(c2); }
	    if(String(tabId)==="3"){ var c3 = renderNutrition(); renderHealth(c3); }
	    if(String(tabId)==="5"){ renderHistory(); }
	  }

	  function setupTabs(){
	    qsa(".fh5co-tab-nav a[data-tab]").forEach(function(a){
	      a.addEventListener("click", function(e){
	        e.preventDefault();
	        activateTab(a.getAttribute("data-tab"));
	      }, true);
	    });
	  }

	  // ===== History =====
	  var LS_KEY = "food_history_v1";
	  function loadHistory(){ try { return JSON.parse(localStorage.getItem(LS_KEY) || "[]"); } catch(e){ return []; } }
	  function saveHistory(list){ localStorage.setItem(LS_KEY, JSON.stringify(list)); }
	  function sumEntries(entries){
	    return entries.reduce(function(acc,it){
	      acc.kcal += (+it.kcal||0); acc.carbs += (+it.carbs||0); acc.protein += (+it.protein||0); acc.fat += (+it.fat||0);
	      return acc;
	    }, {kcal:0,carbs:0,protein:0,fat:0});
	  }

	  function applyHistoryFilters(list){
	    var range = qs("#historyRange") ? qs("#historyRange").value : "7";
	    var sort = qs("#historySort") ? qs("#historySort").value : "new";
	    var q = qs("#historySearch") ? (qs("#historySearch").value||"").trim().toLowerCase() : "";
	    var filtered = list.slice();

	    if(range==="today") filtered = filtered.filter(function(it){ return isSameDay(toDate(it.ts), now()); });
	    else if(range==="7") filtered = filtered.filter(function(it){ return withinDays(toDate(it.ts), 7); });
	    else if(range==="30") filtered = filtered.filter(function(it){ return withinDays(toDate(it.ts), 30); });

	    if(q) filtered = filtered.filter(function(it){ return (it.name||"").toLowerCase().indexOf(q)!==-1; });

	    if(sort==="new") filtered.sort(function(a,b){return (b.ts||0)-(a.ts||0);});
	    else if(sort==="old") filtered.sort(function(a,b){return (a.ts||0)-(b.ts||0);});
	    else if(sort==="kcal_desc") filtered.sort(function(a,b){return (+b.kcal||0)-(+a.kcal||0);});
	    else if(sort==="kcal_asc") filtered.sort(function(a,b){return (+a.kcal||0)-(+b.kcal||0);});

	    return filtered;
	  }

	  function renderHistory(){
	    var raw = loadHistory();
	    var today = raw.filter(function(it){ return isSameDay(toDate(it.ts), now()); });
	    var week = raw.filter(function(it){ return withinDays(toDate(it.ts), 7); });

	    var t = sumEntries(today);
	    var w = sumEntries(week);

	    if(qs("#todayKcal")) qs("#todayKcal").textContent = round0(t.kcal);
	    if(qs("#todayCarb")) qs("#todayCarb").textContent = round0(t.carbs);
	    if(qs("#todayProtein")) qs("#todayProtein").textContent = round0(t.protein);
	    if(qs("#todayFat")) qs("#todayFat").textContent = round0(t.fat);

	    if(qs("#weekKcal")) qs("#weekKcal").textContent = round0(w.kcal);
	    if(qs("#weekCarb")) qs("#weekCarb").textContent = round0(w.carbs);
	    if(qs("#weekProtein")) qs("#weekProtein").textContent = round0(w.protein);
	    if(qs("#weekFat")) qs("#weekFat").textContent = round0(w.fat);

	    var list = applyHistoryFilters(raw);
	    var box = qs("#historyList");
	    if(!box) return;

	    if(!list.length){
	      box.innerHTML = '<p class="mini soft-muted">Không có dữ liệu phù hợp.</p>';
	      return;
	    }

	    box.innerHTML = list.slice(0, 50).map(function(it){
	      var d = toDate(it.ts);
	      var tag = (it.tags && it.tags.length) ? ('<span class="badge-soft" style="margin-left:6px">'+it.tags.join(" · ")+'</span>') : '';
	      return (
	        '<div class="history-item">' +
	          '<div><b>'+it.name+'</b> <span class="badge-soft">'+(it.portion||"1.0")+'x</span>' + tag +
	          '<div class="mini soft-muted">'+d.toLocaleString()+'</div></div>' +
	          '<div class="text-right"><b>'+round0(it.kcal||0)+'</b> kcal' +
	          '<div class="mini soft-muted">C '+round0(it.carbs||0)+' · P '+round0(it.protein||0)+' · F '+round0(it.fat||0)+'</div></div>' +
	        '</div>'
	      );
	    }).join("");
	  }

	  function downloadJSON(filename, obj){
	    var blob = new Blob([JSON.stringify(obj, null, 2)], {type:"application/json"});
	    var url = URL.createObjectURL(blob);
	    var a = document.createElement("a");
	    a.href = url; a.download = filename;
	    document.body.appendChild(a); a.click(); a.remove();
	    setTimeout(function(){ URL.revokeObjectURL(url); }, 500);
	  }

	  function addCurrentToHistory(){
	    var n = renderNutrition();
	    var entry = {
	      ts: Date.now(),
	      key: n.foodKey,
	      name: n.name,
	      portion: n.portion.toFixed(1),
	      goal: qs("#goal") ? qs("#goal").value : "maintain",
	      tags: n.toppingTags || [],
	      kcal: n.kcal,
	      carbs: n.macros.carbs,
	      protein: n.macros.protein,
	      fat: n.macros.fat
	    };

	    var list = loadHistory();
	    list.push(entry);
	    saveHistory(list);
	    renderHistory();
	  }

	  function bindAll(){
	    setupTabs();

	    ["sex","age","weight","height","activity","goal","portion",
	     "includeRuoc","ruocCount","includeCha","chaCount","includeEgg","eggCount"
	    ].forEach(function(id){
	      var el = qs("#"+id);
	      if(!el) return;
	      el.addEventListener("input", function(){ var c = renderNutrition(); renderHealth(c); });
	      el.addEventListener("change", function(){ var c = renderNutrition(); renderHealth(c); });
	    });

	    ["goal2","portionAdvice","frequency"].forEach(function(id){
	      var el = qs("#"+id);
	      if(!el) return;
	      el.addEventListener("change", function(){
	        syncT3toT2();
	        var c = renderNutrition();
	        renderHealth(c);
	      });
	    });

	    qsa(".cond2").forEach(function(c){
	      c.addEventListener("change", function(){ var c2 = renderNutrition(); renderHealth(c2); });
	    });

	    if(qs("#saveHistory")) qs("#saveHistory").addEventListener("click", addCurrentToHistory);
	    if(qs("#exportHistory")) qs("#exportHistory").addEventListener("click", function(){ downloadJSON("food_history.json", loadHistory()); });
	    if(qs("#clearHistory")) qs("#clearHistory").addEventListener("click", function(){ localStorage.removeItem(LS_KEY); renderHistory(); });

	    ["historyRange","historySort","historySearch"].forEach(function(id){
	      var el = qs("#"+id);
	      if(!el) return;
	      el.addEventListener("input", renderHistory);
	      el.addEventListener("change", renderHistory);
	    });
	  }

	  document.addEventListener("DOMContentLoaded", function(){
	    bindAll();
	    var ctx = renderNutrition();
	    renderHealth(ctx);
	    renderHistory();
	  });
	})();
	</script>
	<!-- ====== /PAGE JS ====== -->

	</body>
</html>
